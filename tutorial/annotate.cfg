# Prodigy DSPy Tutorial: Annotation Configuration
#
# This config is used by the dspy.annotate recipe to create gold-standard
# summaries using a baseline DSPy program.
#
# Usage:
#   prodigy dspy.annotate summaries_gold assets/clinical_notes_dev.jsonl \
#     ./annotate.cfg -F ./components.py

# ============================================================================
# DSPy Language Model Configuration
# ============================================================================
[dspy]
[dspy.lm]
# Model to use for predictions
model = "openai/gpt-4.1"

# Optional: Token limit per request
max_tokens = 1500

# Optional: API key environment variable (defaults to OPENAI_API_KEY)
# env_api_key = "MY_OPENAI_API_KEY"

# Temperature for generation (0 = deterministic, 1 = creative)
temperature = 0.7


# ============================================================================
# DSPy Program Configuration
# ============================================================================
[program]
# Points to the registered DSPy program factory function
@dspy_programs = "clinical_summarization.v1"


# ============================================================================
# Data Converter Configuration
# ============================================================================

# Optional: to_dspy converter (for data transformation in annotate)
# Use this converter if your source data keys don't match your DSPy signature.
#
# Use shared converter for all recipes
# [to_dspy_converter]
# @dspy_converters = "prodigy_to_dspy.clinical_summary.v1"
# OR
# Use recipe-specific converter (overrides shared converter)
# [annotate_to_dspy_converter]
# @dspy_converters = "annotate_to_dspy.clinical_summary.v1"

[to_prodigy_converter]
# Converts DSPy predictions to Prodigy task format to be displayed in the UI
@dspy_converters = "dspy_to_prodigy.clinical_summary.v1"


# ============================================================================
# Annotation UI Configuration
# ============================================================================
[dspy_annotation_ui]
# UI for editing and reviewing summaries
@dspy_ui = "clinical_annotation_ui.v1"
